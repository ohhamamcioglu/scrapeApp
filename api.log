INFO:     Will watch for changes in these directories: ['/home/ohhamamcioglu/Desktop/boutiquerugs/ScrapeApp']
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [703622] using StatReload
INFO:     Started server process [703681]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     127.0.0.1:46200 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:46204 - "POST /api/scrape HTTP/1.1" 200 OK
INFO:main:Starting scrape job...
INFO:main:Running scrape_rugsdirect.py...
INFO:main:scrape_rugsdirect.py completed. Output: Fetching page 1...
Fetching page 2...
Fetching page 3...
Fetching page 4...
Fetching page 5...
No mo...
INFO:main:Running scrape_debenhams_algolia.py...
INFO:main:scrape_debenhams_algolia.py completed. Output: Fetching page 0...
Found 100 hits (Total expected: 456)
Fetching page 1...
Found 100 hits (Total exp...
INFO:main:Running scrape_loverugs.py...
INFO:main:scrape_loverugs.py completed. Output: Fetching page 1...
Fetching page 2...
No new products found on this page (Duplicate Page). Ending sc...
INFO:main:Generating report with generate_json_report.py...
INFO:main:Report generation completed. Output: Loading data...
Processing Boutique Rugs...
Processing Rugs Direct...
Processing Debenhams...
Processing Love Rugs...
Processing Incredible Rugs...
Building indices (Size-Based)...
Generating JSON Rep...
INFO:main:Scrape job finished.
INFO:     127.0.0.1:39828 - "GET /api/latest HTTP/1.1" 200 OK
WARNING:  StatReload detected changes in 'main.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [703681]
INFO:     Started server process [710570]
INFO:     Waiting for application startup.
ERROR:    Traceback (most recent call last):
  File "/home/ohhamamcioglu/Desktop/boutiquerugs/ScrapeApp/venv/lib/python3.12/site-packages/starlette/routing.py", line 694, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "/usr/lib/python3.12/contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/ohhamamcioglu/Desktop/boutiquerugs/ScrapeApp/main.py", line 25, in lifespan
    logger.info("Scheduler started. Daily scrape scheduled for 03:00 AM.")
    ^^^^^^
NameError: name 'logger' is not defined

ERROR:    Application startup failed. Exiting.
WARNING:  StatReload detected changes in 'database.py'. Reloading...
INFO:     Started server process [715588]
INFO:     Waiting for application startup.
ERROR:    Traceback (most recent call last):
  File "/home/ohhamamcioglu/Desktop/boutiquerugs/ScrapeApp/venv/lib/python3.12/site-packages/starlette/routing.py", line 694, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "/usr/lib/python3.12/contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/ohhamamcioglu/Desktop/boutiquerugs/ScrapeApp/main.py", line 25, in lifespan
    logger.info("Scheduler started. Daily scrape scheduled for 03:00 AM.")
    ^^^^^^
NameError: name 'logger' is not defined

ERROR:    Application startup failed. Exiting.
WARNING:  StatReload detected changes in 'main.py'. Reloading...
INFO:     Started server process [715635]
INFO:     Waiting for application startup.
ERROR:    Traceback (most recent call last):
  File "/home/ohhamamcioglu/Desktop/boutiquerugs/ScrapeApp/venv/lib/python3.12/site-packages/starlette/routing.py", line 694, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "/usr/lib/python3.12/contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/ohhamamcioglu/Desktop/boutiquerugs/ScrapeApp/main.py", line 25, in lifespan
    logger.info("Scheduler started. Daily scrape scheduled for 03:00 AM.")
    ^^^^^^
NameError: name 'logger' is not defined

ERROR:    Application startup failed. Exiting.
